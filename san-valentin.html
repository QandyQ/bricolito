<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>San Valent√≠n</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            width: 100%;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            background: #000000;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            overflow: hidden;
            position: relative;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('valentin/fondo-arriba.png') center/cover no-repeat;
            pointer-events: none;
            z-index: 1;
        }

        .container {
            text-align: center;
            position: relative;
            z-index: 2;
        }

        .heart-container {
            margin-bottom: 40px;
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .heart-container:hover {
            transform: scale(1.1);
        }

        .heart-container img {
            width: 200px;
            height: 200px;
            display: block;
            margin: 0 auto;
            filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.3)) drop-shadow(0 0 10px rgba(255, 255, 255, 0.8)) drop-shadow(0 0 20px rgba(255, 255, 255, 0.5));
        }

        .message {
            font-family: 'Georgia', 'Garamond', serif;
            font-size: 28px;
            color: #000000;
            font-style: italic;
            letter-spacing: 2px;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
            margin-top: 20px;
            background: url('valentin/fondo-mensaje.png') center/cover no-repeat;
            padding: 50px 80px;
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
            backdrop-filter: none;
            border: none;
            min-width: 400px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        svg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }

        .vein {
            stroke: #ff1493;
            stroke-width: 6;
            fill: none;
            stroke-linecap: round;
            filter: drop-shadow(0 0 4px rgba(255, 20, 147, 0.6));
        }

        .blood-cell {
            fill: #cc0000;
            filter: drop-shadow(0 0 8px rgba(204, 0, 0, 1)) drop-shadow(0 0 15px rgba(255, 0, 0, 0.7)) drop-shadow(0 0 6px rgba(255, 255, 255, 1));
            opacity: 0.9;
            animation: blood-glow 1.5s ease-in-out infinite;
        }

        @keyframes blood-flow-1 {
            0% {
                offset-distance: 0%;
                opacity: 0;
            }
            5% {
                opacity: 1;
            }
            95% {
                opacity: 1;
            }
            100% {
                offset-distance: 100%;
                opacity: 0;
            }
        }

        @keyframes blood-flow-2 {
            0% {
                offset-distance: 0%;
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                offset-distance: 100%;
                opacity: 0;
            }
        }

        @keyframes blood-flow-3 {
            0% {
                offset-distance: 0%;
                opacity: 0;
            }
            15% {
                opacity: 1;
            }
            85% {
                opacity: 1;
            }
            100% {
                offset-distance: 100%;
                opacity: 0;
            }
        }

        .blood-animate-1 {
            animation: blood-flow-1 2s linear infinite;
        }

        .blood-animate-2 {
            animation: blood-flow-2 2.2s linear infinite;
        }

        .blood-animate-3 {
            animation: blood-flow-3 2.4s linear infinite;
        }

        @keyframes blood-glow {
            0%, 100% {
                filter: drop-shadow(0 0 8px rgba(204, 0, 0, 1)) drop-shadow(0 0 15px rgba(255, 0, 0, 0.7)) drop-shadow(0 0 6px rgba(255, 255, 255, 1));
            }
            50% {
                filter: drop-shadow(0 0 15px rgba(204, 0, 0, 1)) drop-shadow(0 0 25px rgba(255, 0, 0, 1)) drop-shadow(0 0 8px rgba(255, 255, 255, 1));
            }
        }

        .heart-beating {
            animation: heartbeat 0.6s ease-in-out infinite;
        }

        @keyframes heartbeat {
            0% {
                transform: scale(1);
            }
            25% {
                transform: scale(1.15);
            }
            50% {
                transform: scale(1);
            }
            75% {
                transform: scale(1.15);
            }
            100% {
                transform: scale(1);
            }
        }

        @keyframes heartbeat-double {
            0%, 100% {
                transform: scale(1);
            }
            20% {
                transform: scale(1.15);
            }
            35% {
                transform: scale(1);
            }
            55% {
                transform: scale(1.15);
            }
            70% {
                transform: scale(1);
            }
        }

        @keyframes heartbeat-continuous {
            0%, 100% {
                transform: scale(1);
            }
            15% {
                transform: scale(1.15);
            }
            30% {
                transform: scale(1);
            }
            45% {
                transform: scale(1.15);
            }
            60% {
                transform: scale(1);
            }
            75% {
                transform: scale(1.15);
            }
        }

        .heart-beating-1 {
            animation: heartbeat 0.6s ease-in-out 1 !important;
        }

        .heart-beating-2 {
            animation: heartbeat-double 1s ease-in-out 1 !important;
        }

        .heart-beating-continuous {
            animation: heartbeat-continuous 0.6s ease-in-out infinite !important;
        }

        .poem-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: rgba(0, 0, 0, 0.95);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10;
            overflow-y: auto;
        }

        .poem-container.hidden {
            display: none;
        }

        .poem-text {
            max-width: 800px;
            padding: 60px 40px;
            font-family: 'Georgia', 'Garamond', serif;
            font-size: 20px;
            line-height: 2;
            color: #ffffff;
            text-align: center;
            word-wrap: break-word;
            white-space: pre-wrap;
        }

        .poem-line {
            opacity: 0;
            margin: 10px 0;
        }

        .poem-line.show {
            animation: fadeInPoem 0.5s ease-in forwards;
        }

        .poem-line.hide {
            animation: fadeOutPoem 2s ease-out forwards;
        }

        @keyframes fadeInPoem {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        @keyframes fadeOutPoem {
            from {
                opacity: 1;
            }
            to {
                opacity: 0;
            }
        }

        .pause-play-btn {
            margin-top: 20px;
            padding: 12px 24px;
            font-size: 16px;
            font-family: 'Georgia', 'Garamond', serif;
            color: #ffffff;
            background: rgba(255, 20, 147, 0.8);
            border: 2px solid #ffffff;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(255, 20, 147, 0.5);
        }

        .pause-play-btn:hover {
            background: rgba(255, 20, 147, 1);
            box-shadow: 0 6px 20px rgba(255, 20, 147, 0.7);
            transform: scale(1.05);
        }

        .pause-play-btn.hidden {
            display: none;
        }

        .poem-controls {
            position: fixed;
            bottom: 40px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 12;
        }

        .poem-controls.hidden {
            display: none;
        }

        .floating-text {
            position: fixed;
            font-family: 'Georgia', 'Garamond', serif;
            font-size: 24px;
            color: #ffffff;
            opacity: 0.3;
            pointer-events: none;
            z-index: 5;
            white-space: nowrap;
            animation: fadeInOut 4s ease-in-out forwards;
        }

        @keyframes fadeInOut {
            0% {
                opacity: 0.1;
            }
            50% {
                opacity: 0.35;
            }
            100% {
                opacity: 0;
            }
        }
    </style>
</head>
<body>
    <audio id="music-audio" preload="auto">
        <source src="valentin/musica-amor.mp3" type="audio/mpeg">
    </audio>
    <audio id="music-audio-2" preload="auto">
        <source src="valentin/musica-amor-2.mp3" type="audio/mpeg">
    </audio>
    
    <svg id="veins-canvas"></svg>
    
    <div class="container">
        <div class="heart-container" id="heart">
            <img src="valentin/corazon.png" alt="Coraz√≥n">
        </div>
        <div class="message" id="message">Da click al corazon</div>
    </div>

    <div id="poem-controls" class="poem-controls hidden">
        <button id="pause-play-btn" class="pause-play-btn">‚è∏ Pausa</button>
    </div>

    <div id="poem-container" class="poem-container hidden">
        <div id="poem-text" class="poem-text"></div>
    </div>

    <script>
        const heart = document.getElementById('heart');
        const canvas = document.getElementById('veins-canvas');
        const message = document.getElementById('message');
        let clickCount = 0;
        let veinsCreated = false;
        let isAnimating = false;
        let bloodCellsAdded = false;
        let veinPaths = [];
        let floatingTextStarted = false;

        const floatingTexts = [
            'pspspsps',
            'holaaaa',
            'te amoooo',
            'guapaaaa',
            'mi mujeerr te amoo',
            'saludos a ccopitooo',
            'te amamos los dos',
            'pspspsp'
        ];

        // Configurar reproducci√≥n de segunda canci√≥n cuando termine la primera
        const audio1 = document.getElementById('music-audio');
        const audio2 = document.getElementById('music-audio-2');
        audio1.addEventListener('ended', function() {
            audio2.play().catch(err => console.log('Error reproduciendo m√∫sica-amor-2:', err));
        });

        heart.addEventListener('click', function() {
            // Bloquear click si ya est√° animando
            if (isAnimating) return;

            isAnimating = true;
            clickCount++;

            // Crear venas solo en el primer click
            if (clickCount === 1) {
                message.style.opacity = '0';
                message.style.transition = 'opacity 0.3s ease';
                createVeins();
                veinsCreated = true;
                
                // Reproducir m√∫sica
                const audio = document.getElementById('music-audio');
                audio.play().catch(err => console.log('Error reproduciendo m√∫sica:', err));
                
                // Iniciar textos flotantes
                startFloatingTexts();
            }

            // Remover clases de animaci√≥n anteriores
            heart.classList.remove('heart-beating-1', 'heart-beating-2', 'heart-beating-continuous');

            // Forzar reflow para reiniciar la animaci√≥n
            void heart.offsetWidth;

            // Aplicar la animaci√≥n seg√∫n el n√∫mero de clicks
            let animationDuration = 0;
            if (clickCount === 1) {
                heart.classList.add('heart-beating-1');
                animationDuration = 600;
                updateMessage(1);
            } else if (clickCount === 2) {
                heart.classList.add('heart-beating-2');
                animationDuration = 1000;
                updateMessage(2);
            } else if (clickCount >= 3) {
                if (!heart.classList.contains('heart-beating-continuous')) {
                    heart.classList.add('heart-beating-continuous');
                }
                // Agregar gl√≥bulos rojos en el tercer click
                if (!bloodCellsAdded) {
                    addBloodCells();
                    bloodCellsAdded = true;
                    // Mostrar el poema despu√©s de agregar los gl√≥bulos
                    setTimeout(() => {
                        showPoem();
                    }, 500);
                }
                animationDuration = 600;
                updateMessage(3);
            }

            // Desbloquear click despu√©s de que termine la animaci√≥n
            setTimeout(() => {
                isAnimating = false;
            }, animationDuration);
        });

        function createFloatingText() {
            const randomText = floatingTexts[Math.floor(Math.random() * floatingTexts.length)];
            const randomX = Math.random() * window.innerWidth;
            const randomY = Math.random() * window.innerHeight;
            
            const floatingElement = document.createElement('div');
            floatingElement.className = 'floating-text';
            floatingElement.textContent = randomText;
            floatingElement.style.left = randomX + 'px';
            floatingElement.style.top = randomY + 'px';
            
            document.body.appendChild(floatingElement);
            
            // Eliminar el elemento despu√©s de que termine la animaci√≥n (4 segundos)
            setTimeout(() => {
                floatingElement.remove();
            }, 4000);
        }

        // Iniciar textos flotantes en el primer click
        function startFloatingTexts() {
            if (!floatingTextStarted) {
                floatingTextStarted = true;
                // Crear un texto flotante cada 1.5 segundos
                setInterval(createFloatingText, 1500);
                // Crear uno inicial
                createFloatingText();
            }
        }

        function updateMessage(clicks) {
            setTimeout(() => {
                message.style.opacity = '1';
                message.style.transition = 'opacity 0.3s ease';

                if (clicks === 1) {
                    message.textContent = 'üò¢ Toca de nuevo...';
                } else if (clicks === 2) {
                    message.textContent = 'üíì Una vez m√°s...';
                } else if (clicks >= 3) {
                    message.textContent = '‚ù§Ô∏è ¬°S√© m√≠o!';
                }
            }, 300);
        }

        function createVeins() {
            const centerX = window.innerWidth / 2;
            const centerY = window.innerHeight / 2;
            const maxDistance = Math.max(window.innerWidth, window.innerHeight);

            // Definir 8 direcciones: arriba, abajo, izquierda, derecha y 4 esquinas
            const directions = [
                // Arriba
                { startX: centerX, startY: centerY, endX: centerX - 50, endY: -100 },
                { startX: centerX, startY: centerY, endX: centerX + 50, endY: -100 },
                // Abajo
                { startX: centerX, startY: centerY, endX: centerX - 50, endY: window.innerHeight + 100 },
                { startX: centerX, startY: centerY, endX: centerX + 50, endY: window.innerHeight + 100 },
                // Esquina superior izquierda
                { startX: centerX, startY: centerY, endX: -100, endY: -100 },
                // Esquina superior derecha
                { startX: centerX, startY: centerY, endX: window.innerWidth + 100, endY: -100 },
                // Esquina inferior izquierda
                { startX: centerX, startY: centerY, endX: -100, endY: window.innerHeight + 100 },
                // Esquina inferior derecha
                { startX: centerX, startY: centerY, endX: window.innerWidth + 100, endY: window.innerHeight + 100 }
            ];

            veinPaths = [];
            directions.forEach((dir, index) => {
                const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
                path.setAttribute('class', 'vein');
                
                // Crear una vena completamente curveada como espagueti org√°nico
                let pathData = `M ${dir.startX} ${dir.startY}`;
                
                // Generar m√∫ltiples curvas suaves (Bezier) desordenadas
                const numSegments = 5 + Math.floor(Math.random() * 4);
                let currentX = dir.startX;
                let currentY = dir.startY;
                
                for (let i = 1; i <= numSegments; i++) {
                    const progress = i / (numSegments + 1);
                    const baseX = dir.startX + (dir.endX - dir.startX) * progress;
                    const baseY = dir.startY + (dir.endY - dir.startY) * progress;
                    
                    // Desviaci√≥n grande para efecto desordenado
                    const offsetX = (Math.random() - 0.5) * 300;
                    const offsetY = (Math.random() - 0.5) * 300;
                    
                    const endX = baseX + offsetX;
                    const endY = baseY + offsetY;
                    
                    // Dos puntos de control para crear curva suave
                    const cp1X = currentX + (endX - currentX) * 0.4 + (Math.random() - 0.5) * 100;
                    const cp1Y = currentY + (endY - currentY) * 0.4 + (Math.random() - 0.5) * 100;
                    const cp2X = currentX + (endX - currentX) * 0.6 + (Math.random() - 0.5) * 100;
                    const cp2Y = currentY + (endY - currentY) * 0.6 + (Math.random() - 0.5) * 100;
                    
                    pathData += ` C ${cp1X} ${cp1Y}, ${cp2X} ${cp2Y}, ${endX} ${endY}`;
                    
                    currentX = endX;
                    currentY = endY;
                }
                
                // Curva final hasta el destino
                const finalCp1X = currentX + (dir.endX - currentX) * 0.3 + (Math.random() - 0.5) * 80;
                const finalCp1Y = currentY + (dir.endY - currentY) * 0.3 + (Math.random() - 0.5) * 80;
                const finalCp2X = currentX + (dir.endX - currentX) * 0.7;
                const finalCp2Y = currentY + (dir.endY - currentY) * 0.7;
                
                pathData += ` C ${finalCp1X} ${finalCp1Y}, ${finalCp2X} ${finalCp2Y}, ${dir.endX} ${dir.endY}`;
                
                path.setAttribute('d', pathData);
                path.setAttribute('id', `vein-${index}`);
                
                canvas.appendChild(path);
                veinPaths.push(path);

                // Animar la vena
                animateVein(path, 0.5 + index * 0.1);
            });
        }

        function addBloodCells() {
            veinPaths.forEach((path, veinIndex) => {
                // Velocidad diferente para cada vena
                const veinDuration = 1.8 + (veinIndex * 0.25);
                
                // Crear 4 gl√≥bulos rojos por vena con diferentes velocidades
                for (let i = 0; i < 4; i++) {
                    const group = document.createElementNS('http://www.w3.org/2000/svg', 'g');
                    
                    const circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
                    circle.setAttribute('class', 'blood-cell');
                    circle.setAttribute('r', '4');
                    circle.setAttribute('cx', '0');
                    circle.setAttribute('cy', '0');
                    
                    group.appendChild(circle);
                    canvas.appendChild(group);
                    
                    // Crear animateMotion para mover el c√≠rculo a lo largo del path
                    const animateMotion = document.createElementNS('http://www.w3.org/2000/svg', 'animateMotion');
                    animateMotion.setAttribute('dur', `${veinDuration}s`);
                    animateMotion.setAttribute('repeatCount', 'indefinite');
                    animateMotion.setAttribute('keyPoints', '0;1');
                    animateMotion.setAttribute('keyTimes', '0;1');
                    animateMotion.setAttribute('calcMode', 'linear');
                    
                    // Usar el path de la vena como base de movimiento
                    const mpath = document.createElementNS('http://www.w3.org/2000/svg', 'mpath');
                    mpath.setAttributeNS('http://www.w3.org/1999/xlink', 'xlink:href', `#vein-${veinIndex}`);
                    animateMotion.appendChild(mpath);
                    
                    group.appendChild(animateMotion);
                    
                    // Gl√≥bulos m√°s cercanos entre s√≠ (delay m√°s corto)
                    animateMotion.setAttribute('begin', `${i * 0.35}s`);
                    
                    // Agregar animaci√≥n de opacidad (sincronizada con la duraci√≥n de la vena)
                    const animate = document.createElementNS('http://www.w3.org/2000/svg', 'animate');
                    animate.setAttribute('attributeName', 'opacity');
                    animate.setAttribute('values', '0;1;1;0');
                    animate.setAttribute('keyTimes', '0;0.05;0.95;1');
                    animate.setAttribute('dur', `${veinDuration}s`);
                    animate.setAttribute('repeatCount', 'indefinite');
                    animate.setAttribute('begin', `${i * 0.35}s`);
                    circle.appendChild(animate);
                }
            });
        }

        function animateVein(path, delay) {
            const pathLength = path.getTotalLength();
            path.style.strokeDasharray = pathLength;
            path.style.strokeDashoffset = pathLength;
            path.style.opacity = '0';
            
            // Usar setTimeout para respetar el delay
            setTimeout(() => {
                const startTime = performance.now();
                const duration = 2000; // 2 segundos
                
                const animate = (currentTime) => {
                    const elapsed = currentTime - startTime;
                    const progress = Math.min(elapsed / duration, 1);
                    
                    // Animar el offset del dash desde pathLength a 0
                    path.style.strokeDashoffset = pathLength * (1 - progress);
                    // Animar la opacidad
                    path.style.opacity = progress;
                    
                    if (progress < 1) {
                        requestAnimationFrame(animate);
                    }
                };
                
                requestAnimationFrame(animate);
            }, delay * 1000);
        }

        // Agregar animaci√≥n CSS (no la usamos pero la dejamos por compatibilidad)
        const style = document.createElement('style');
        style.textContent = `
            @keyframes drawVein {
                from {
                    stroke-dashoffset: 0;
                    opacity: 0;
                }
                to {
                    stroke-dashoffset: 0;
                    opacity: 1;
                }
            }
        `;
        document.head.appendChild(style);

        function showPoem() {
            const messageDiv = document.getElementById('message');
            const pausePlayBtn = document.getElementById('pause-play-btn');
            const poemControls = document.getElementById('poem-controls');
            
            const poemContent = `Como la lluvia que est√° cayendo ahora mismo
mientras escribo esto,
golpeando el techo,
derram√°ndose sin pedir permiso,
miles de millones de gotas cayendo sin detenerse‚Ä¶

as√≠ va mi sangre.

Gl√≥bulo tras gl√≥bulo rojo
atravesando mis venas,
empujados por este coraz√≥n
que no sabe hacer otra cosa
que latir.
Y latir.
Y seguir latiendo.
Sin parar.

Cada pulso es tu nombre.
No met√°fora.
Es literal.

Mi coraz√≥n bombea
y la sangre corre por todo mi cuerpo,
recorre mis venas como si supiera el camino,
como si cada arteria estuviera dise√±ada
para llevarte.

Y mira mis venas‚Ä¶
se cruzan unas con otras,
se enredan,
parecen un caos debajo de la piel.

As√≠ de dif√≠cil ser√≠a quitar lo que siento por ti.
No es una l√≠nea recta que pueda borrarse.
Es una red viva.
Un entramado que vuelve a encontrarse.

Hoy es 14 de febrero.
Pero no importa por San Valent√≠n.
Importa porque contigo
todos los d√≠as los celebro.

No es una fecha.
Es que mi coraz√≥n no descansa.
Es que mi sangre no se detiene.
Es que aunque el calendario cambie,
yo sigo latiendo por ti igual.

No importa d√≥nde est√©s ahorita,
ni d√≥nde est√© yo.
Separados por la distancia,
separados por la tierra,
pero no separados del amor.

La sangre sigue cruzando mis venas
aunque t√∫ no est√©s aqu√≠ al lado.
El coraz√≥n sigue latiendo
aunque tus manos no est√©n sobre mi pecho.

Y sin importar qu√© pase,
voy a encontrar la forma.
La forma de tocarte,
de hacerte el amor cuando el tiempo nos junte,
de hacerte m√≠a con respeto, con verdad, con entrega.

Porque no solo te deseo de cuerpo,
te deseo de alma.
Te deseo en lo invisible,
en lo profundo,
en lo que no se ve pero sostiene todo.

T√∫ mereces cosas bonitas.
Yo tambi√©n.
Y Diosito me dio a ti.

Mi amor amado.
Mi amor del alma.
Y del literalmente coraz√≥n.

Yo soy el negro
y t√∫ mi blanca,
mi mujer,
mi warmi.

Y mientras haya sangre movi√©ndose en mis venas,
mientras este coraz√≥n siga bombeando sin parar,
aunque el mundo nos ponga kil√≥metros,
aunque la tierra nos separe los pasos,

este caos bajo mi piel
va a seguir llevando tu nombre.

Porque no sabe detenerse.
Mi otro corazon tambi√©n late por ti.
y si sabes a cual me refiero...
Mucho.
Mucho.
Y m√°s.`;

            const lines = poemContent.split('\n');
            messageDiv.innerHTML = '';

            // Variables de control
            let lineIndex = 0;
            let isPaused = false;
            let currentTimeout = null;
            let fadeTimeout = null;

            // Mostrar bot√≥n de pausa
            poemControls.classList.remove('hidden');

            const showNextLines = () => {
                if (lineIndex >= lines.length) {
                    // Poema finalizado
                    poemControls.classList.add('hidden');
                    return;
                }

                // Mostrar 2 l√≠neas
                let twoLinesText = '';
                if (lineIndex < lines.length) {
                    twoLinesText += lines[lineIndex];
                }
                if (lineIndex + 1 < lines.length) {
                    twoLinesText += '\n' + lines[lineIndex + 1];
                }

                messageDiv.textContent = twoLinesText;
                messageDiv.style.opacity = '1';
                messageDiv.style.transition = 'opacity 0.5s ease-in';

                // Despu√©s de 3 segundos, las l√≠neas se desvanecen (si no est√° pausado)
                currentTimeout = setTimeout(() => {
                    if (!isPaused) {
                        messageDiv.style.transition = 'opacity 2s ease-out';
                        messageDiv.style.opacity = '0';

                        fadeTimeout = setTimeout(() => {
                            if (!isPaused) {
                                lineIndex += 2;
                                messageDiv.style.transition = 'opacity 0.5s ease-in';
                                messageDiv.style.opacity = '1';
                                showNextLines();
                            }
                        }, 2000);
                    }
                }, 3000);
            };

            // Manejar pausa/play
            // Remover listeners anteriores
            pausePlayBtn.onclick = null;
            pausePlayBtn.onclick = () => {
                isPaused = !isPaused;
                
                if (isPaused) {
                    pausePlayBtn.textContent = '‚ñ∂ Play';
                    pausePlayBtn.style.background = 'rgba(100, 200, 100, 0.8)';
                    // Limpiar timeouts
                    clearTimeout(currentTimeout);
                    clearTimeout(fadeTimeout);
                } else {
                    pausePlayBtn.textContent = '‚è∏ Pausa';
                    pausePlayBtn.style.background = 'rgba(255, 20, 147, 0.8)';
                    // Reanudar
                    messageDiv.style.opacity = '1';
                    messageDiv.style.transition = 'opacity 0.5s ease-in';
                    showNextLines();
                }
            };

            // Iniciar a mostrar las l√≠neas
            messageDiv.style.opacity = '0';
            setTimeout(showNextLines, 500);
        }
    </script>
</body>
</html>
